<!DOCTYPE html>
<html>
  <head>
    <title>Flowfact News</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" type="text/css" href="news.css" />
  </head>
  <body>
    <!--style="display: block; margin-left: auto; margin-right: auto; width: 50%;"-->
    <div>
      <h4
        class="MuiTypography-root MuiTypography-h4 DashboardCard-padding DashboardCard-title"
      >
        News
      </h4>
      <div class="DashboardCard-divider"></div>
    </div>
    <div id="newsContent"></div>

    <script type="text/javascript">
      document.addEventListener(
        "DOMContentLoaded",
        function() {
          /*fetch("https://download.flowfact.me/flowfact-news.json")
            .then(response => response.json())
            .then(json => loadRecentNews(json));*/

            let mock = '[{"image": "https://my.flowfact.com/wp-content/cache/borlabs_cookie/uGosvEWc9rw_maxresdefault.jpg","headline": "My Samplecontent wiht long headline for testing.","content": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu","targetUrl": ""},{"image": "","headline": "My short headline.","content": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, ","targetUrl": ""},{"image": "https://my.flowfact.com/wp-content/cache/borlabs_cookie/a5aLiZmXxqo_maxresdefault.jpg","headline": "My short headline.","content": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, ","targetUrl": ""},{"image": "https://my.flowfact.com/wp-content/uploads/2018/12/360GradRundgaenge-26.png","headline": "My short headline.","content": "Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, ","targetUrl": ""}]';
            loadRecentNews(JSON.parse(mock));
        },
        false
      );
      function loadRecentNews(news) {
        let newsContentDiv = document.getElementById("newsContent");
        let rootContentDiv = document.createElement("div");
        if (typeof news !== "undefined" && news.length > 0) {
          news.forEach(function(newsElement) {
            rootContentDiv.className = "MuiButtonBase-root DashboardCard-root";
            rootContentDiv.appendChild(
              createImageContent(newsElement.image)
            );
            rootContentDiv.appendChild(createTitleContent(newsElement.headline));
            rootContentDiv.appendChild(
              createDescriptionContent(newsElement.content)
            );
            rootContentDiv.appendChild(
              createButtonContent(newsElement.targetUrl)
            );
            newsContentDiv.appendChild(rootContentDiv);
          });
        } else {
          rootContentDiv.appendChild(createTitleContent("No news available"));
          newsContentDiv.appendChild(rootContentDiv);
        }
      }
      function createImageContent(src) {
        let contentDiv = document.createElement("div");
        contentDiv.className = "DashboardCard-content DashboardCard-padding";
        let image = document.createElement("img");
        image.src = src;
        image.style = "width:100%; height:300px; object-fit: cover;";
        contentDiv.appendChild(image);
        return contentDiv;
      }
      function createTitleContent(title) {
        let contentDiv = document.createElement("div");
        contentDiv.className = "DashboardCard-content DashboardCard-padding";
        let hTitle = document.createElement("h3");
        hTitle.className =
          "MuiTypography-root MuiTypography-h3 DashboardCard-padding DashboardCard-title";
        hTitle.innerText = title;
        contentDiv.appendChild(hTitle);
        return contentDiv;
      }
      function createDescriptionContent(description) {
        let contentDiv = document.createElement("div");
        contentDiv.className = "DashboardCard-content DashboardCard-padding";
        let span = document.createElement("span");
        span.className = "MuiTypography-root MuiTypography-caption";
        span.innerText = description;
        contentDiv.appendChild(span);
        return contentDiv;
      }
      function createButtonContent(targetURL) {
        let contentDiv = document.createElement("div");
        contentDiv.className = "DashboardCard-content DashboardCard-padding";
        let button = document.createElement("a");
        button.href=targetURL;
        button.target='_blank';
        button.style="margin-bottom:10%"
        button.className =
          "MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-raised MuiButton-raisedPrimary";
        let span = document.createElement("span");
        span.className = "MuiButton-label";
        span.innerText = "Read more...";
        button.appendChild(span);
        contentDiv.appendChild(button);
        return contentDiv;
      }
    </script>
  </body>
</html>
